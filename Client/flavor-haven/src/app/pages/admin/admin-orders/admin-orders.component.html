<div class="admin-orders-container">
  <!-- Ошибка -->
  <app-error-message *ngIf="error" [message]="error"></app-error-message>

  <!-- Загрузка -->
  <p *ngIf="isLoading">Загрузка заказов...</p>

  <!-- Таблица заказов -->
  <table *ngIf="!isLoading && orders?.length" class="orders-table">
    <thead>
    <tr>
      <th>Номер заказа</th>
      <th>Пользователь</th>
      <th>Сумма</th>
      <th>Статус</th>
      <th>Действия</th>
    </tr>
    </thead>
    <tbody>
    <tr *ngFor="let order of orders">
      <td>{{ order?.orderNumber }}</td>
      <td>{{ order?.userName }}</td>
      <td>{{ order?.amount }} руб</td>
      <td>
        <select
          #statusSelect
          [value]="order?.status?.id || ''"
          (change)="updateStatus(order?.id || '', statusSelect.value)"
        >
          <option *ngFor="let status of statuses" [value]="status?.id">
            {{ status?.name }}
          </option>
        </select>
      </td>
      <td>
        <button class="action-button" (click)="viewItems(order?.id || '')">
          {{ selectedOrderIdForItems === order?.id ? 'Скрыть блюда' : 'Блюда' }}
        </button>
        <button class="action-button" (click)="viewReview(order?.id || '')">
          {{ selectedOrderIdForReview === order?.id ? 'Скрыть отзыв' : 'Отзыв' }}
        </button>
      </td>
    </tr>
    <!-- Отображение блюд -->
    <tr *ngIf="selectedOrderIdForItems">
      <td colspan="5">
        <app-order-items [orderId]="selectedOrderIdForItems"></app-order-items>
      </td>
    </tr>
    <!-- Отображение отзыва -->
    <tr *ngIf="selectedOrderIdForReview">
      <td colspan="5">
        <app-order-review [orderId]="selectedOrderIdForReview"></app-order-review>
      </td>
    </tr>
    </tbody>
  </table>

  <!-- Сообщение об отсутствии заказов -->
  <p *ngIf="!isLoading && !orders?.length">Заказы отсутствуют.</p>
</div>
